<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Visual masking # Convolution masks # Problem Statement # Implement an image processing web app supporting different image kernels and supporting:
Image histogram visualization. Different lightness (coloring brightness) tools. Background # Kernel # Convolution, Kernel or Mask is an image processing technique in which an odd-sized matrix is used to achieve effects such as sharpening, blurring or enhancement. These masks are achieved by convolution between a kernel and an image, changing the intensity of a pixel to reflect the intensities of the surrounding piexels."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Visual masking # Convolution masks # Problem Statement # Implement an image processing web app supporting different image kernels and supporting:
Image histogram visualization. Different lightness (coloring brightness) tools. Background # Kernel # Convolution, Kernel or Mask is an image processing technique in which an odd-sized matrix is used to achieve effects such as sharpening, blurring or enhancement. These masks are achieved by convolution between a kernel and an image, changing the intensity of a pixel to reflect the intensities of the surrounding piexels."><meta property="og:type" content="article"><meta property="og:url" content="https://computacion-visual-2022-2.github.io/vc_page/docs/contenido/workshop1/masking/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2022-09-05T09:39:03-05:00"><title>Masking | VC-2022-2</title><link rel=manifest href=/vc_page/manifest.json><link rel=icon href=/vc_page/favicon.png type=image/x-icon><link rel=stylesheet href=/vc_page/book.min.ab46de3e725a6415339a37bba23a0067534a37289b063c9f8d011515a63097a8.css integrity="sha256-q0bePnJaZBUzmje7ojoAZ1NKNyibBjyfjQEVFaYwl6g=" crossorigin=anonymous><script defer src=/vc_page/flexsearch.min.js></script>
<script defer src=/vc_page/en.search.min.680f9517fb992febbb519fd679851d67f1e770dfc5d11e4c9d2da2c16dfdbe9d.js integrity="sha256-aA+VF/uZL+u7UZ/WeYUdZ/HncN/F0R5MnS2iwW39vp0=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/vc_page/><span>VC-2022-2</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/vc_page/docs/contenido/>Contenido</a><ul><li><input type=checkbox id=section-389d651ad498d6de6d23b8270b749d93 class=toggle>
<label for=section-389d651ad498d6de6d23b8270b749d93 class="flex justify-between"><a role=button>Shaders</a></label><ul><li><a href=/vc_page/docs/contenido/shaders/1._coloring/>1. Coloring</a></li><li><a href=/vc_page/docs/contenido/shaders/2._texturing/>2. Texturing</a></li><li><a href=/vc_page/docs/contenido/shaders/3._image_processing/>3. Image Processing</a></li><li><a href=/vc_page/docs/contenido/shaders/4._procedural_texturing/>4. Procedural Texturing</a></li><li><a href=/vc_page/docs/contenido/shaders/5._lighting/>5. Lighting</a></li></ul></li><li><input type=checkbox id=section-2389dc99fc67873ebfb8ef67f4a3fee8 class=toggle checked>
<label for=section-2389dc99fc67873ebfb8ef67f4a3fee8 class="flex justify-between"><a role=button>Workshop1</a></label><ul><li><a href=/vc_page/docs/contenido/workshop1/illusions/>Illusions</a></li><li><a href=/vc_page/docs/contenido/workshop1/masking/ class=active>Masking</a></li></ul></li><li><input type=checkbox id=section-815c4fefd753e489e90e326d54a408e9 class=toggle>
<label for=section-815c4fefd753e489e90e326d54a408e9 class="flex justify-between"><a role=button>Workshop2</a></label><ul><li><a href=/vc_page/docs/contenido/workshop2/solar_system/>Solar System</a></li></ul></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/vc_page/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Masking</strong>
<label for=toc-control><img src=/vc_page/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#visual-masking>Visual masking</a></li><li><a href=#convolution-masks>Convolution masks</a><ul><li><a href=#problem-statement>Problem Statement</a></li><li><a href=#background>Background</a><ul><li><a href=#kernel>Kernel</a></li><li><a href=#histogram>Histogram</a></li><li><a href=#lightness>Lightness</a></li></ul></li><li><a href=#code>Code</a><ul><li><a href=#kernels>Kernels</a></li><li><a href=#histograma>Histograma</a></li><li><a href=#lightness-1>Lightness</a></li><li><a href=#grayscale-luma>Grayscale Luma</a></li></ul></li><li><a href=#conclusions>Conclusions</a><ul><li><a href=#references>References</a></li></ul></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=visual-masking>Visual masking
<a class=anchor href=#visual-masking>#</a></h1><h1 id=convolution-masks>Convolution masks
<a class=anchor href=#convolution-masks>#</a></h1><h2 id=problem-statement>Problem Statement
<a class=anchor href=#problem-statement>#</a></h2><p>Implement an image processing web app supporting different image kernels and supporting:</p><ul><li>Image histogram visualization.</li><li>Different lightness (coloring brightness) tools.</li></ul><h2 id=background>Background
<a class=anchor href=#background>#</a></h2><h3 id=kernel>Kernel
<a class=anchor href=#kernel>#</a></h3><p>Convolution, Kernel or Mask is an image processing technique in which an odd-sized matrix is used to achieve effects such as sharpening, blurring or enhancement. These masks are achieved by convolution between a kernel and an image, changing the intensity of a pixel to reflect the intensities of the surrounding piexels.</p><p>Convolution is also useful to sharpen or enhance some qualities of images, which are very useful when dealing with scientific images.</p><p>The following kernels are the ones we use in the code.</p><p><strong>1. Identity:</strong> This mask returns the same image.</p><link rel=stylesheet href=/vc_page/katex/katex.min.css><script defer src=/vc_page/katex/katex.min.js></script>
<script defer src=/vc_page/katex/auto-render.min.js onload=renderMathInElement(document.body)></script><span>
\(\begin{bmatrix}
0 & 0 & 0\\
0 & 1 & 0\\
0 & 0 & 0
\end{bmatrix}\)</span><p><strong>2. Sharpen:</strong> The sharpen kernel emphasizes the differences in adjacent pixel values which makes the image appear more vivid.</p><span>\(\begin{bmatrix}
0 & -1 & 0\\
-1 & 5 & -1\\
0 & -1 & 0
\end{bmatrix}\)</span><p><strong>3. Edge Detection:</strong> The mask to find the points of drastic change of brightness in an image.</p><span>\(\begin{bmatrix}
-1 & -1 & -1\\
-1 & 8 & -1\\
-1 & -1 & -1
\end{bmatrix}\)</span><p><strong>4. Box blur:</strong> A Box Blur is a linear filter in which each pixel results from the average value of its neighbors.</p><span>\(\frac{1}{9}
\begin{bmatrix}
1 & 1 & 1\\
1 & 1 & 1\\
1 & 1 & 1
\end{bmatrix}\)</span><h3 id=histogram>Histogram
<a class=anchor href=#histogram>#</a></h3><p>A histogram is a graphical representation that displays how frequently various color values occur in an image. The histogram focuses only on the proportion of the colors and not the location of the colors in the Images. They show the statistical distribution of colors and the essential tones present in the image.</p><h3 id=lightness>Lightness
<a class=anchor href=#lightness>#</a></h3><p>Saturation is the intensity of a hue from gray tone (no saturation) to pure, vivid color (high saturation). Brightness is the relative lightness or darkness of a particular color, from black (no brightness) to white (full brightness). Brightness is also called Lightness in some contexts, in particular in SQL queries.
The definition used in photometry and colorimetry describes the non-linear perception we have of the amount of light received, which is often defined from the luminance of the source studied.</p><h2 id=code>Code
<a class=anchor href=#code>#</a></h2><h3 id=kernels>Kernels
<a class=anchor href=#kernels>#</a></h3><table><thead><tr><th>Shortcut</th><th>Description</th></tr></thead><tbody><tr><td>0</td><td>Identity</td></tr><tr><td>1</td><td>Sharpen</td></tr><tr><td>2</td><td>Edge Detection</td></tr><tr><td>3</td><td>Box Blur</td></tr></tbody></table><details><summary>Code Kernel</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>let img;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>//Identidad
</span></span><span style=display:flex><span>var kernel = [
</span></span><span style=display:flex><span>   [0, 0, 0],
</span></span><span style=display:flex><span>   [0, 1, 0],
</span></span><span style=display:flex><span>   [0, 0, 0]
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>function preload() {
</span></span><span style=display:flex><span>   img = loadImage(&#39;/vc_page/sketches/mandrill.png&#39;);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>function setup() {
</span></span><span style=display:flex><span>   createCanvas(400, 400);
</span></span><span style=display:flex><span>   img.loadPixels();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> function draw() {
</span></span><span style=display:flex><span>   newImg = createImage(img.width, img.height);
</span></span><span style=display:flex><span>   newImg.loadPixels();
</span></span><span style=display:flex><span>   
</span></span><span style=display:flex><span>   for (let x = 0; x &lt; <span style=color:#f92672>img.width</span><span style=color:#960050;background-color:#1e0010>;</span> <span style=color:#a6e22e>x</span><span style=color:#960050;background-color:#1e0010>++)</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>     <span style=color:#a6e22e>for</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>let</span> <span style=color:#a6e22e>y </span><span style=color:#f92672>=</span> <span style=color:#e6db74>0;</span> <span style=color:#a6e22e>y</span> <span style=color:#960050;background-color:#1e0010>&lt;</span> <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>height</span><span style=color:#960050;background-color:#1e0010>;</span> <span style=color:#a6e22e>y</span><span style=color:#960050;background-color:#1e0010>++)</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>c </span><span style=color:#f92672>=</span> <span style=color:#e6db74>convolution(x,</span> <span style=color:#a6e22e>y</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>kernel</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>index </span><span style=color:#f92672>=</span> <span style=color:#e6db74>4</span> <span style=color:#960050;background-color:#1e0010>*</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>x</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>width</span> <span style=color:#960050;background-color:#1e0010>*</span> <span style=color:#a6e22e>y</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>newImg</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>pixels</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>index</span><span style=color:#960050;background-color:#1e0010>]</span> <span style=color:#960050;background-color:#1e0010>=</span> <span style=color:#a6e22e>red</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>c</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>newImg</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>pixels</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>index</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>]</span> <span style=color:#960050;background-color:#1e0010>=</span> <span style=color:#a6e22e>green</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>c</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>newImg</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>pixels</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>index</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>2</span><span style=color:#960050;background-color:#1e0010>]</span> <span style=color:#960050;background-color:#1e0010>=</span> <span style=color:#a6e22e>blue</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>c</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>newImg</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>pixels</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>index</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>3</span><span style=color:#960050;background-color:#1e0010>]</span> <span style=color:#960050;background-color:#1e0010>=</span> <span style=color:#a6e22e>alpha</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>c</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span>        <span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>   
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>newImg</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>updatePixels</span><span style=color:#960050;background-color:#1e0010>();</span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>image</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>newImg</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>,</span><span style=color:#a6e22e>width</span><span style=color:#960050;background-color:#1e0010>,</span><span style=color:#a6e22e>height</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>function</span> <span style=color:#a6e22e>convolution</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>x</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>y</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>matrix</span><span style=color:#960050;background-color:#1e0010>)</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>rtotal </span><span style=color:#f92672>=</span> <span style=color:#e6db74>0;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>gtotal </span><span style=color:#f92672>=</span> <span style=color:#e6db74>0;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>btotal </span><span style=color:#f92672>=</span> <span style=color:#e6db74>0;</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>for</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>kx </span><span style=color:#f92672>=</span> <span style=color:#e6db74>-1;</span> <span style=color:#a6e22e>kx</span> <span style=color:#960050;background-color:#1e0010>&lt;=</span> <span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>;</span> <span style=color:#a6e22e>kx</span><span style=color:#960050;background-color:#1e0010>++)</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>for</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>ky </span><span style=color:#f92672>=</span> <span style=color:#e6db74>-1;</span> <span style=color:#a6e22e>ky</span> <span style=color:#960050;background-color:#1e0010>&lt;=</span> <span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>;</span> <span style=color:#a6e22e>ky</span><span style=color:#960050;background-color:#1e0010>++)</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>xpos </span><span style=color:#f92672>=</span> <span style=color:#e6db74>x</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>kx</span><span style=color:#960050;background-color:#1e0010>;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>ypos </span><span style=color:#f92672>=</span> <span style=color:#e6db74>y</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>ky</span><span style=color:#960050;background-color:#1e0010>;</span>
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>r </span><span style=color:#f92672>=</span> <span style=color:#e6db74>0;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>g </span><span style=color:#f92672>=</span> <span style=color:#e6db74>0;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>b </span><span style=color:#f92672>=</span> <span style=color:#e6db74>0;</span>
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>index </span><span style=color:#f92672>=</span> <span style=color:#e6db74>4</span> <span style=color:#960050;background-color:#1e0010>*</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>xpos</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>width</span> <span style=color:#960050;background-color:#1e0010>*</span> <span style=color:#a6e22e>ypos</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>index </span><span style=color:#f92672>=</span> <span style=color:#e6db74>constrain(index,</span> <span style=color:#a6e22e>0</span> <span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>pixels</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>length</span> <span style=color:#a6e22e>-</span> <span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>r </span><span style=color:#f92672>=</span> <span style=color:#e6db74>img.pixels[index];</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>g </span><span style=color:#f92672>=</span> <span style=color:#e6db74>img.pixels[index</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>];</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>b </span><span style=color:#f92672>=</span> <span style=color:#e6db74>img.pixels[index</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>2</span><span style=color:#960050;background-color:#1e0010>];</span>
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>rtotal</span> <span style=color:#960050;background-color:#1e0010>+=</span> <span style=color:#a6e22e>matrix</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>kx</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>][</span><span style=color:#a6e22e>ky</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>]</span> <span style=color:#960050;background-color:#1e0010>*</span> <span style=color:#a6e22e>r</span><span style=color:#960050;background-color:#1e0010>;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>gtotal</span> <span style=color:#960050;background-color:#1e0010>+=</span> <span style=color:#a6e22e>matrix</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>kx</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>][</span><span style=color:#a6e22e>ky</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>]</span> <span style=color:#960050;background-color:#1e0010>*</span> <span style=color:#a6e22e>g</span><span style=color:#960050;background-color:#1e0010>;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>btotal</span> <span style=color:#960050;background-color:#1e0010>+=</span> <span style=color:#a6e22e>matrix</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>kx</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>][</span><span style=color:#a6e22e>ky</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>]</span> <span style=color:#960050;background-color:#1e0010>*</span> <span style=color:#a6e22e>b</span><span style=color:#960050;background-color:#1e0010>;</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>//</span><span style=color:#a6e22e>Se</span> <span style=color:#a6e22e>verefica</span> <span style=color:#a6e22e>que</span> <span style=color:#a6e22e>este</span> <span style=color:#a6e22e>dentro</span> <span style=color:#a6e22e>de</span> <span style=color:#a6e22e>RGB</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>rtotal </span><span style=color:#f92672>=</span> <span style=color:#e6db74>constrain(rtotal,</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>255</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>gtotal </span><span style=color:#f92672>=</span> <span style=color:#e6db74>constrain(gtotal,</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>255</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>btotal </span><span style=color:#f92672>=</span> <span style=color:#e6db74>constrain(btotal,</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>255</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>return</span> <span style=color:#a6e22e>color</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>rtotal</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>gtotal</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>btotal</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>function</span> <span style=color:#a6e22e>keyPressed</span><span style=color:#960050;background-color:#1e0010>()</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>if</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>key </span><span style=color:#f92672>=</span><span style=color:#e6db74>==</span> <span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>&#39;)</span> <span style=color:#960050;background-color:#1e0010>{</span> <span style=color:#960050;background-color:#1e0010>//</span><span style=color:#a6e22e>Identidad</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>kernel </span><span style=color:#f92672>=</span> <span style=color:#e6db74>[</span>
</span></span><span style=display:flex><span>         <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>],</span>
</span></span><span style=display:flex><span>         <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>],</span>
</span></span><span style=display:flex><span>         <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>]</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>];</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>}</span> <span style=color:#a6e22e>else</span> <span style=color:#a6e22e>if</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>key </span><span style=color:#f92672>=</span><span style=color:#e6db74>==</span> <span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>&#39;)</span> <span style=color:#960050;background-color:#1e0010>{</span> <span style=color:#960050;background-color:#1e0010>//</span><span style=color:#a6e22e>Sharpen</span> <span style=color:#a6e22e>-</span> <span style=color:#a6e22e>Enfocar</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>kernel </span><span style=color:#f92672>=</span> <span style=color:#e6db74>[</span>
</span></span><span style=display:flex><span>         <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>-1</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>],</span>
</span></span><span style=display:flex><span>         <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>-1</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>5</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>-1</span><span style=color:#960050;background-color:#1e0010>],</span>
</span></span><span style=display:flex><span>         <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>-1</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>]</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>];</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>}</span> <span style=color:#a6e22e>else</span> <span style=color:#a6e22e>if</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>key </span><span style=color:#f92672>=</span><span style=color:#e6db74>==</span> <span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#a6e22e>2</span><span style=color:#960050;background-color:#1e0010>&#39;)</span> <span style=color:#960050;background-color:#1e0010>{</span> <span style=color:#960050;background-color:#1e0010>//</span><span style=color:#a6e22e>Detecci</span><span style=color:#960050;background-color:#1e0010>รณ</span><span style=color:#a6e22e>n</span> <span style=color:#a6e22e>de</span> <span style=color:#a6e22e>bordes</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>kernel </span><span style=color:#f92672>=</span> <span style=color:#e6db74>[</span>
</span></span><span style=display:flex><span>         <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>-1</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>-1</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>-1</span><span style=color:#960050;background-color:#1e0010>],</span>
</span></span><span style=display:flex><span>         <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>-1</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>8</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>-1</span><span style=color:#960050;background-color:#1e0010>],</span>
</span></span><span style=display:flex><span>         <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>-1</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>-1</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>-1</span><span style=color:#960050;background-color:#1e0010>]</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>];</span>  
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>}</span>  <span style=color:#a6e22e>else</span> <span style=color:#a6e22e>if</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>key </span><span style=color:#f92672>=</span><span style=color:#e6db74>==</span> <span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#a6e22e>3</span><span style=color:#960050;background-color:#1e0010>&#39;)</span> <span style=color:#960050;background-color:#1e0010>{</span> <span style=color:#960050;background-color:#1e0010>//</span><span style=color:#a6e22e>Desenfoque</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>kernel </span><span style=color:#f92672>=</span> <span style=color:#e6db74>[</span>
</span></span><span style=display:flex><span>         <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#a6e22e>9</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#a6e22e>9</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#a6e22e>9</span><span style=color:#960050;background-color:#1e0010>],</span>
</span></span><span style=display:flex><span>         <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#a6e22e>9</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#a6e22e>9</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#a6e22e>9</span><span style=color:#960050;background-color:#1e0010>],</span>
</span></span><span style=display:flex><span>         <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#a6e22e>9</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#a6e22e>9</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#a6e22e>9</span><span style=color:#960050;background-color:#1e0010>]</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>];</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>//</span><span style=color:#a6e22e>Ref:</span> <span style=color:#a6e22e>https:</span><span style=color:#960050;background-color:#1e0010>//</span><span style=color:#a6e22e>p5js</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>org</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#a6e22e>examples</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#a6e22e>image-convolution</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>html</span></span></span></code></pre></div></div></details><iframe id=kernels style=width:425px;height:425px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/vc_page/sketches/kernels.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h3 id=histograma>Histograma
<a class=anchor href=#histograma>#</a></h3><details><summary>Code Histogram</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>let img;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>function preload() {
</span></span><span style=display:flex><span>  img = loadImage(&#39;/vc_page/sketches/mandrill.png&#39;);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>function setup() {
</span></span><span style=display:flex><span>  createCanvas(img.width, img.height);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>function draw() {
</span></span><span style=display:flex><span>  background(220);
</span></span><span style=display:flex><span>  image(img, 0, 0, img.width, img.height);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  var hist = [];
</span></span><span style=display:flex><span>    for (let i = 0; i &lt; <span style=color:#f92672>256</span><span style=color:#960050;background-color:#1e0010>;</span> <span style=color:#a6e22e>i</span><span style=color:#960050;background-color:#1e0010>++)</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>hist</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>i</span><span style=color:#960050;background-color:#1e0010>]</span> <span style=color:#960050;background-color:#1e0010>=</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>;</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>loadPixels</span><span style=color:#960050;background-color:#1e0010>();</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#a6e22e>Calculate</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>histogram</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>for</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>let</span> <span style=color:#a6e22e>i </span><span style=color:#f92672>=</span> <span style=color:#e6db74>0;</span> <span style=color:#a6e22e>i</span> <span style=color:#960050;background-color:#1e0010>&lt;</span> <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>width</span><span style=color:#960050;background-color:#1e0010>;</span> <span style=color:#a6e22e>i</span><span style=color:#960050;background-color:#1e0010>++)</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>for</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>let</span> <span style=color:#a6e22e>j </span><span style=color:#f92672>=</span> <span style=color:#e6db74>0;</span> <span style=color:#a6e22e>j</span> <span style=color:#960050;background-color:#1e0010>&lt;</span> <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>height</span><span style=color:#960050;background-color:#1e0010>;</span> <span style=color:#a6e22e>j</span><span style=color:#960050;background-color:#1e0010>++)</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>index </span><span style=color:#f92672>=</span> <span style=color:#e6db74>(i</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>j</span> <span style=color:#960050;background-color:#1e0010>*</span> <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>width</span><span style=color:#960050;background-color:#1e0010>)</span> <span style=color:#960050;background-color:#1e0010>*</span> <span style=color:#a6e22e>4</span><span style=color:#960050;background-color:#1e0010>;</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>r </span><span style=color:#f92672>=</span> <span style=color:#e6db74>img.pixels[index];</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>g </span><span style=color:#f92672>=</span> <span style=color:#e6db74>img.pixels[index</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>];</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>b </span><span style=color:#f92672>=</span> <span style=color:#e6db74>img.pixels[index</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>2</span><span style=color:#960050;background-color:#1e0010>];</span>
</span></span><span style=display:flex><span>        <span style=color:#960050;background-color:#1e0010>//</span><span style=color:#a6e22e>println</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>c</span><span style=color:#960050;background-color:#1e0010>,</span><span style=color:#a6e22e>col</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>bright </span><span style=color:#f92672>=</span> <span style=color:#e6db74>floor((r</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>g</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>b</span><span style=color:#960050;background-color:#1e0010>)</span> <span style=color:#960050;background-color:#1e0010>/</span> <span style=color:#a6e22e>3</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>hist</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>bright</span><span style=color:#960050;background-color:#1e0010>]++;</span>
</span></span><span style=display:flex><span>        <span style=color:#960050;background-color:#1e0010>//</span><span style=color:#a6e22e>break</span><span style=color:#960050;background-color:#1e0010>;</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#a6e22e>Find</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>largest</span> <span style=color:#a6e22e>value</span> <span style=color:#a6e22e>in</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>histogram</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>var</span> <span style=color:#a6e22e>histMax </span><span style=color:#f92672>=</span> <span style=color:#e6db74>max(hist);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>stroke</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>255</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#a6e22e>Draw</span> <span style=color:#a6e22e>half</span> <span style=color:#a6e22e>of</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>histogram</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>skip</span> <span style=color:#a6e22e>every</span> <span style=color:#a6e22e>second</span> <span style=color:#a6e22e>value</span><span style=color:#960050;background-color:#1e0010>)</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>for</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>let</span> <span style=color:#a6e22e>i </span><span style=color:#f92672>=</span> <span style=color:#e6db74>0;</span> <span style=color:#a6e22e>i</span> <span style=color:#960050;background-color:#1e0010>&lt;</span> <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>width</span><span style=color:#960050;background-color:#1e0010>;</span> <span style=color:#a6e22e>i</span> <span style=color:#960050;background-color:#1e0010>+=</span> <span style=color:#a6e22e>2</span><span style=color:#960050;background-color:#1e0010>)</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#a6e22e>Map</span> <span style=color:#a6e22e>i</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>from</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>..</span><span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>width</span><span style=color:#960050;background-color:#1e0010>)</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>a</span> <span style=color:#a6e22e>location</span> <span style=color:#a6e22e>in</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>histogram</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>..</span><span style=color:#a6e22e>255</span><span style=color:#960050;background-color:#1e0010>)</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>which </span><span style=color:#f92672>=</span> <span style=color:#e6db74>int(map(i,</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>width</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>255</span><span style=color:#960050;background-color:#1e0010>));</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#a6e22e>Convert</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>histogram</span> <span style=color:#a6e22e>value</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>a</span> <span style=color:#a6e22e>location</span> <span style=color:#a6e22e>between</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>bottom</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>top</span> <span style=color:#a6e22e>of</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>picture</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>y </span><span style=color:#f92672>=</span> <span style=color:#e6db74>int(map(hist[which],</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>histMax</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>height</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>));</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>line</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>i</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>height</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>i</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>y</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>//</span><span style=color:#a6e22e>Ref:</span> <span style=color:#a6e22e>https:</span><span style=color:#960050;background-color:#1e0010>//</span><span style=color:#a6e22e>processing</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>org</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#a6e22e>examples</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#a6e22e>histogram</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>html</span></span></span></code></pre></div></div></details><iframe id=histogram style=width:530px;height:550px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/vc_page/sketches/histogram.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h3 id=lightness-1>Lightness
<a class=anchor href=#lightness-1>#</a></h3><details><summary>Code Lightness</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>let img;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>function preload() {
</span></span><span style=display:flex><span>  img = loadImage(&#39;/vc_page/sketches/mandrill.png&#39;);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>function setup() {
</span></span><span style=display:flex><span>  createCanvas(725, 550);
</span></span><span style=display:flex><span>  pixelDensity(1);
</span></span><span style=display:flex><span>  img.loadPixels();
</span></span><span style=display:flex><span>  loadPixels();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>function draw() {
</span></span><span style=display:flex><span>  for (let x = 0; x &lt; <span style=color:#f92672>img.width</span><span style=color:#960050;background-color:#1e0010>;</span> <span style=color:#a6e22e>x</span><span style=color:#960050;background-color:#1e0010>++)</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>for</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>let</span> <span style=color:#a6e22e>y </span><span style=color:#f92672>=</span> <span style=color:#e6db74>0;</span> <span style=color:#a6e22e>y</span> <span style=color:#960050;background-color:#1e0010>&lt;</span> <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>height</span><span style=color:#960050;background-color:#1e0010>;</span> <span style=color:#a6e22e>y</span><span style=color:#960050;background-color:#1e0010>++)</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#a6e22e>Calcular</span> <span style=color:#a6e22e>la</span> <span style=color:#a6e22e>posici</span><span style=color:#960050;background-color:#1e0010>รณ</span><span style=color:#a6e22e>n</span> <span style=color:#a6e22e>1D</span> <span style=color:#a6e22e>de</span> <span style=color:#a6e22e>una</span> <span style=color:#a6e22e>matriz</span> <span style=color:#a6e22e>2D</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>loc </span><span style=color:#f92672>=</span> <span style=color:#e6db74>(x</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>y</span> <span style=color:#960050;background-color:#1e0010>*</span> <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>width</span><span style=color:#960050;background-color:#1e0010>)</span> <span style=color:#960050;background-color:#1e0010>*</span> <span style=color:#a6e22e>4</span><span style=color:#960050;background-color:#1e0010>;</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#a6e22e>Obtener</span> <span style=color:#a6e22e>los</span> <span style=color:#a6e22e>valores</span> <span style=color:#a6e22e>R</span><span style=color:#960050;background-color:#1e0010>,</span><span style=color:#a6e22e>G</span><span style=color:#960050;background-color:#1e0010>,</span><span style=color:#a6e22e>B</span> <span style=color:#a6e22e>de</span> <span style=color:#a6e22e>una</span> <span style=color:#a6e22e>imagen</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>r</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>g</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>b</span><span style=color:#960050;background-color:#1e0010>;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>r </span><span style=color:#f92672>=</span> <span style=color:#e6db74>img.pixels[loc];</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#a6e22e>Calcular</span> <span style=color:#a6e22e>una</span> <span style=color:#a6e22e>cantidad</span> <span style=color:#a6e22e>a</span> <span style=color:#a6e22e>cambiar</span> <span style=color:#a6e22e>de</span> <span style=color:#a6e22e>brillo</span> <span style=color:#a6e22e>basado</span> <span style=color:#a6e22e>en</span> <span style=color:#a6e22e>la</span> <span style=color:#a6e22e>proximidad</span> <span style=color:#a6e22e>al</span> <span style=color:#a6e22e>rat</span><span style=color:#960050;background-color:#1e0010>รณ</span><span style=color:#a6e22e>n</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>maxdist </span><span style=color:#f92672>=</span> <span style=color:#e6db74>100;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>d </span><span style=color:#f92672>=</span> <span style=color:#e6db74>dist(x,</span> <span style=color:#a6e22e>y</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>mouseX</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>mouseY</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>adjustbrightness </span><span style=color:#f92672>=</span> <span style=color:#e6db74>(255</span> <span style=color:#960050;background-color:#1e0010>*</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>maxdist</span> <span style=color:#a6e22e>-</span> <span style=color:#a6e22e>d</span><span style=color:#960050;background-color:#1e0010>))</span> <span style=color:#960050;background-color:#1e0010>/</span> <span style=color:#a6e22e>maxdist</span><span style=color:#960050;background-color:#1e0010>;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>r</span> <span style=color:#960050;background-color:#1e0010>+=</span> <span style=color:#a6e22e>adjustbrightness</span><span style=color:#960050;background-color:#1e0010>;</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#a6e22e>Limitar</span> <span style=color:#a6e22e>RGB</span> <span style=color:#a6e22e>para</span> <span style=color:#a6e22e>asegurarse</span> <span style=color:#a6e22e>de</span> <span style=color:#a6e22e>estar</span> <span style=color:#a6e22e>dentro</span> <span style=color:#a6e22e>del</span> <span style=color:#a6e22e>rango</span> <span style=color:#a6e22e>0-255</span> <span style=color:#a6e22e>de</span> <span style=color:#a6e22e>color</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>r </span><span style=color:#f92672>=</span> <span style=color:#e6db74>constrain(r,</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>255</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#a6e22e>Hacer</span> <span style=color:#a6e22e>un</span> <span style=color:#a6e22e>nuevo</span> <span style=color:#a6e22e>color</span> <span style=color:#a6e22e>y</span> <span style=color:#a6e22e>definir</span> <span style=color:#a6e22e>el</span> <span style=color:#a6e22e>pixel</span> <span style=color:#a6e22e>en</span> <span style=color:#a6e22e>la</span> <span style=color:#a6e22e>ventana</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>//</span><span style=color:#a6e22e>color</span> <span style=color:#a6e22e>c </span><span style=color:#f92672>=</span> <span style=color:#e6db74>color(r,</span> <span style=color:#a6e22e>g</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>b</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>pixloc </span><span style=color:#f92672>=</span> <span style=color:#e6db74>(y</span> <span style=color:#960050;background-color:#1e0010>*</span> <span style=color:#a6e22e>width</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>x</span><span style=color:#960050;background-color:#1e0010>)</span> <span style=color:#960050;background-color:#1e0010>*</span> <span style=color:#a6e22e>4</span><span style=color:#960050;background-color:#1e0010>;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>pixels</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>pixloc</span><span style=color:#960050;background-color:#1e0010>]</span> <span style=color:#960050;background-color:#1e0010>=</span> <span style=color:#a6e22e>r</span><span style=color:#960050;background-color:#1e0010>;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>pixels</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>pixloc</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>]</span> <span style=color:#960050;background-color:#1e0010>=</span> <span style=color:#a6e22e>r</span><span style=color:#960050;background-color:#1e0010>;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>pixels</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>pixloc</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>2</span><span style=color:#960050;background-color:#1e0010>]</span> <span style=color:#960050;background-color:#1e0010>=</span> <span style=color:#a6e22e>r</span><span style=color:#960050;background-color:#1e0010>;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>pixels</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>pixloc</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>3</span><span style=color:#960050;background-color:#1e0010>]</span> <span style=color:#960050;background-color:#1e0010>=</span> <span style=color:#a6e22e>255</span><span style=color:#960050;background-color:#1e0010>;</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updatePixels</span><span style=color:#960050;background-color:#1e0010>();</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>let</span> <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>function</span> <span style=color:#a6e22e>preload</span><span style=color:#960050;background-color:#1e0010>()</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>img </span><span style=color:#f92672>=</span> <span style=color:#e6db74>loadImage(&#39;/vc_page/sketches/mandrill.png&#39;);</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>function</span> <span style=color:#a6e22e>setup</span><span style=color:#960050;background-color:#1e0010>()</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>createCanvas</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>width</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>height</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>function</span> <span style=color:#a6e22e>draw</span><span style=color:#960050;background-color:#1e0010>()</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>background</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>220</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>image</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>width</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>height</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>var</span> <span style=color:#a6e22e>hist </span><span style=color:#f92672>=</span> <span style=color:#e6db74>[];</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>for</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>let</span> <span style=color:#a6e22e>i </span><span style=color:#f92672>=</span> <span style=color:#e6db74>0;</span> <span style=color:#a6e22e>i</span> <span style=color:#960050;background-color:#1e0010>&lt;</span> <span style=color:#a6e22e>256</span><span style=color:#960050;background-color:#1e0010>;</span> <span style=color:#a6e22e>i</span><span style=color:#960050;background-color:#1e0010>++)</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>hist</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>i</span><span style=color:#960050;background-color:#1e0010>]</span> <span style=color:#960050;background-color:#1e0010>=</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>;</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>loadPixels</span><span style=color:#960050;background-color:#1e0010>();</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#a6e22e>Calculate</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>histogram</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>for</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>let</span> <span style=color:#a6e22e>i </span><span style=color:#f92672>=</span> <span style=color:#e6db74>0;</span> <span style=color:#a6e22e>i</span> <span style=color:#960050;background-color:#1e0010>&lt;</span> <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>width</span><span style=color:#960050;background-color:#1e0010>;</span> <span style=color:#a6e22e>i</span><span style=color:#960050;background-color:#1e0010>++)</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>for</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>let</span> <span style=color:#a6e22e>j </span><span style=color:#f92672>=</span> <span style=color:#e6db74>0;</span> <span style=color:#a6e22e>j</span> <span style=color:#960050;background-color:#1e0010>&lt;</span> <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>height</span><span style=color:#960050;background-color:#1e0010>;</span> <span style=color:#a6e22e>j</span><span style=color:#960050;background-color:#1e0010>++)</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>index </span><span style=color:#f92672>=</span> <span style=color:#e6db74>(i</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>j</span> <span style=color:#960050;background-color:#1e0010>*</span> <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>width</span><span style=color:#960050;background-color:#1e0010>)</span> <span style=color:#960050;background-color:#1e0010>*</span> <span style=color:#a6e22e>4</span><span style=color:#960050;background-color:#1e0010>;</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>r </span><span style=color:#f92672>=</span> <span style=color:#e6db74>img.pixels[index];</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>g </span><span style=color:#f92672>=</span> <span style=color:#e6db74>img.pixels[index</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>];</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>b </span><span style=color:#f92672>=</span> <span style=color:#e6db74>img.pixels[index</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>2</span><span style=color:#960050;background-color:#1e0010>];</span>
</span></span><span style=display:flex><span>        <span style=color:#960050;background-color:#1e0010>//</span><span style=color:#a6e22e>println</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>c</span><span style=color:#960050;background-color:#1e0010>,</span><span style=color:#a6e22e>col</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>bright </span><span style=color:#f92672>=</span> <span style=color:#e6db74>floor((r</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>g</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>b</span><span style=color:#960050;background-color:#1e0010>)</span> <span style=color:#960050;background-color:#1e0010>/</span> <span style=color:#a6e22e>3</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>hist</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>bright</span><span style=color:#960050;background-color:#1e0010>]++;</span>
</span></span><span style=display:flex><span>        <span style=color:#960050;background-color:#1e0010>//</span><span style=color:#a6e22e>break</span><span style=color:#960050;background-color:#1e0010>;</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#a6e22e>Find</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>largest</span> <span style=color:#a6e22e>value</span> <span style=color:#a6e22e>in</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>histogram</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>var</span> <span style=color:#a6e22e>histMax </span><span style=color:#f92672>=</span> <span style=color:#e6db74>max(hist);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>stroke</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>255</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#a6e22e>Draw</span> <span style=color:#a6e22e>half</span> <span style=color:#a6e22e>of</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>histogram</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>skip</span> <span style=color:#a6e22e>every</span> <span style=color:#a6e22e>second</span> <span style=color:#a6e22e>value</span><span style=color:#960050;background-color:#1e0010>)</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>for</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>let</span> <span style=color:#a6e22e>i </span><span style=color:#f92672>=</span> <span style=color:#e6db74>0;</span> <span style=color:#a6e22e>i</span> <span style=color:#960050;background-color:#1e0010>&lt;</span> <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>width</span><span style=color:#960050;background-color:#1e0010>;</span> <span style=color:#a6e22e>i</span> <span style=color:#960050;background-color:#1e0010>+=</span> <span style=color:#a6e22e>2</span><span style=color:#960050;background-color:#1e0010>)</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#a6e22e>Map</span> <span style=color:#a6e22e>i</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>from</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>..</span><span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>width</span><span style=color:#960050;background-color:#1e0010>)</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>a</span> <span style=color:#a6e22e>location</span> <span style=color:#a6e22e>in</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>histogram</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>..</span><span style=color:#a6e22e>255</span><span style=color:#960050;background-color:#1e0010>)</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>which </span><span style=color:#f92672>=</span> <span style=color:#e6db74>int(map(i,</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>width</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>255</span><span style=color:#960050;background-color:#1e0010>));</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#a6e22e>Convert</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>histogram</span> <span style=color:#a6e22e>value</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>a</span> <span style=color:#a6e22e>location</span> <span style=color:#a6e22e>between</span>
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>bottom</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>top</span> <span style=color:#a6e22e>of</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>picture</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>y </span><span style=color:#f92672>=</span> <span style=color:#e6db74>int(map(hist[which],</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>histMax</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>height</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>));</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>line</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>i</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>img</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>height</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>i</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>y</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>//</span><span style=color:#a6e22e>Ref:</span> <span style=color:#a6e22e>https:</span><span style=color:#960050;background-color:#1e0010>//</span><span style=color:#a6e22e>processing</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>org</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#a6e22e>examples</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#a6e22e>histogram</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>html</span></span></span></code></pre></div></div></details><iframe id=lightness style=width:530px;height:550px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/vc_page/sketches/lightness.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h3 id=grayscale-luma>Grayscale Luma
<a class=anchor href=#grayscale-luma>#</a></h3><details><summary>Code Histogram</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>let img;
</span></span><span style=display:flex><span>function preload() {
</span></span><span style=display:flex><span>    img = loadImage(&#39;/vc_page/sketches/mandrill.png&#39;);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>function setup() {
</span></span><span style=display:flex><span>    var canvas = createCanvas(550, 550);
</span></span><span style=display:flex><span>    textAlign(LEFT, TOP);
</span></span><span style=display:flex><span>    fill(255);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>function draw() {
</span></span><span style=display:flex><span>    image(img, 0, 0);
</span></span><span style=display:flex><span>    loadPixels();
</span></span><span style=display:flex><span>    for (let j = 0; j &lt; <span style=color:#f92672>550</span><span style=color:#960050;background-color:#1e0010>;</span> <span style=color:#a6e22e>j</span><span style=color:#960050;background-color:#1e0010>++)</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>for</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>let</span> <span style=color:#a6e22e>i </span><span style=color:#f92672>=</span> <span style=color:#e6db74>0;</span> <span style=color:#a6e22e>i</span> <span style=color:#960050;background-color:#1e0010>&lt;</span> <span style=color:#a6e22e>Math</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>max</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>Math</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>min</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>mouseX</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>600</span><span style=color:#960050;background-color:#1e0010>),</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>);</span> <span style=color:#a6e22e>i</span><span style=color:#960050;background-color:#1e0010>++)</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>index </span><span style=color:#f92672>=</span> <span style=color:#e6db74>4</span> <span style=color:#960050;background-color:#1e0010>*</span> <span style=color:#960050;background-color:#1e0010>((</span><span style=color:#a6e22e>j</span><span style=color:#960050;background-color:#1e0010>)</span> <span style=color:#960050;background-color:#1e0010>*</span> <span style=color:#a6e22e>550</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>i</span><span style=color:#960050;background-color:#1e0010>));</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>let</span> <span style=color:#a6e22e>c </span><span style=color:#f92672>=</span> <span style=color:#e6db74>(0.2126</span> <span style=color:#960050;background-color:#1e0010>*</span> <span style=color:#a6e22e>pixels</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>index</span><span style=color:#960050;background-color:#1e0010>]</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>7152</span> <span style=color:#960050;background-color:#1e0010>*</span> <span style=color:#a6e22e>pixels</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>index</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>]</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>0722</span> <span style=color:#960050;background-color:#1e0010>*</span> <span style=color:#a6e22e>pixels</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>index</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>2</span><span style=color:#960050;background-color:#1e0010>]);</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>pixels</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>index</span><span style=color:#960050;background-color:#1e0010>]</span> <span style=color:#960050;background-color:#1e0010>=</span> <span style=color:#a6e22e>c</span><span style=color:#960050;background-color:#1e0010>;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>pixels</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>index</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>1</span><span style=color:#960050;background-color:#1e0010>]</span> <span style=color:#960050;background-color:#1e0010>=</span> <span style=color:#a6e22e>c</span><span style=color:#960050;background-color:#1e0010>;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>pixels</span><span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>index</span> <span style=color:#960050;background-color:#1e0010>+</span> <span style=color:#a6e22e>2</span><span style=color:#960050;background-color:#1e0010>]</span> <span style=color:#960050;background-color:#1e0010>=</span> <span style=color:#a6e22e>c</span><span style=color:#960050;background-color:#1e0010>;</span>
</span></span><span style=display:flex><span>        <span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>updatePixels</span><span style=color:#960050;background-color:#1e0010>();</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>//</span><span style=color:#a6e22e>text</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>frameRate</span><span style=color:#960050;background-color:#1e0010>().</span><span style=color:#a6e22e>toFixed</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>3</span><span style=color:#960050;background-color:#1e0010>),</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>);</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span></span></span></code></pre></div></div></details><iframe id=luma style=width:530px;height:550px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/vc_page/sketches/luma.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h2 id=conclusions>Conclusions
<a class=anchor href=#conclusions>#</a></h2><p>Through this module, we can understand how computers process images through RGB and HSL</p><p>Earlier in the history of computing, we used masking and kernels to process images in lower resolutions.</p><p>Modern image processing tools, such as photoshop, use the techniques described in this video to apply effects to an image through playing with the RGB and HSL values and applying them to the selecte dimage.</p><h3 id=references>References
<a class=anchor href=#references>#</a></h3><ul><li><a href=https://setosa.io/ev/image-kernels/>https://setosa.io/ev/image-kernels/</a></li><li><a href=https://en.wikipedia.org/wiki/Kernel_%28image_processing%29>https://en.wikipedia.org/wiki/Kernel_(image_processing)</a></li><li><a href=https://photographylife.com/understanding-histograms-in-photography>https://photographylife.com/understanding-histograms-in-photography</a></li><li><a href=https://manifold.net/doc/mfd8/colors_as_hue_saturation_and_brightness.htm>https://manifold.net/doc/mfd8/colors_as_hue_saturation_and_brightness.htm</a></li><li><a href=http://www.workwithcolor.com/color-properties-definitions-0101.htm>http://www.workwithcolor.com/color-properties-definitions-0101.htm</a></li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/visualcomputing/showcase/commit/11c01126d3a6cae0be634041680b8a9ad3d5fe96 title='Last modified by jtaquez | September 5, 2022' target=_blank rel=noopener><img src=/vc_page/svg/calendar.svg class=book-icon alt=Calendar>
<span>September 5, 2022</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#visual-masking>Visual masking</a></li><li><a href=#convolution-masks>Convolution masks</a><ul><li><a href=#problem-statement>Problem Statement</a></li><li><a href=#background>Background</a><ul><li><a href=#kernel>Kernel</a></li><li><a href=#histogram>Histogram</a></li><li><a href=#lightness>Lightness</a></li></ul></li><li><a href=#code>Code</a><ul><li><a href=#kernels>Kernels</a></li><li><a href=#histograma>Histograma</a></li><li><a href=#lightness-1>Lightness</a></li><li><a href=#grayscale-luma>Grayscale Luma</a></li></ul></li><li><a href=#conclusions>Conclusions</a><ul><li><a href=#references>References</a></li></ul></li></ul></li></ul></nav></div></aside></main></body></html>